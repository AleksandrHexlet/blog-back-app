Blog Backend Application - Java 21 & Spring Boot 3.2
–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ REST API –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–±–ª–æ–≥ –Ω–∞ Java 21 –∏ Spring Boot 3.2 —Å PostgreSQL, Gradle –∏ Spring Data JDBC

üìö –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Java 21

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

Java 21 features –≤ –ø—Ä–æ–µ–∫—Ç–µ

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

API Endpoints

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

Troubleshooting

–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–≠—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ REST API –¥–ª—è –±–ª–æ–≥-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö Java 21 features (record types, sealed classes, pattern matching) –∏ Spring Boot 3.2.

–ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:

‚úÖ Java 21 record types –¥–ª—è entities –∏ DTOs

‚úÖ Spring Data JDBC –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î

‚úÖ PostgreSQL –∫–∞–∫ production-ready –ë–î

‚úÖ Gradle –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏ –≥–∏–±–∫–æ–π —Å–±–æ—Ä–∫–∏

‚úÖ Comprehensive JUnit 5 —Ç–µ—Å—Ç—ã —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤

‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Tomcat (Executable JAR)

‚úÖ REST API —Å –ø–æ–ª–Ω–æ–π CRUD —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è, –ø–æ–∏—Å–∫, –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–í–µ—Ä—Å–∏—è	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Java	21+	–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å record types
Spring Boot	3.2.5+	–§—Ä–µ–π–º–≤–æ—Ä–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
Spring Data JDBC	3.2+	Data Access Layer –≤–º–µ—Å—Ç–æ boilerplate DAO
PostgreSQL	15+	Production-ready —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
Gradle	8+	–°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ —Å Kotlin DSL
JUnit 5	5.9+	–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
Spring Boot Test	3.2+	Integration –∏ WebMvc —Ç–µ—Å—Ç—ã
Lombok	1.18+	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è boilerplate (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)
Jackson	2.15+	JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
H2	2.1+	In-memory –ë–î –¥–ª—è —Ç–µ—Å—Ç–æ–≤
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ
–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
Java 21+ (LTS –≤–µ—Ä—Å–∏—è —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π)

Gradle 8+ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å gradle wrapper –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)

PostgreSQL 15+ (–º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ Docker)

Git –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
Docker & Docker Compose (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ PostgreSQL)

IntelliJ IDEA (Ultimate –∏–ª–∏ Community Edition)

Postman –∏–ª–∏ curl (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API)

Visual Studio Code —Å Java —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
–û–ó–£: 2+ GB (–¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ë–î)

–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ: 500+ MB (–¥–ª—è Gradle –∫–µ—à–∞ –∏ PostgreSQL –¥–∞–Ω–Ω—ã—Ö)

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
   bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd blog-backend-java21

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Java
java -version  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å Java 21+
2. –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
   –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL:

bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL –≤ Docker Compose
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker-compose ps

# PostgreSQL –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ localhost:5432
# –ë–î: blog_db
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: postgres
# –ü–∞—Ä–æ–ª—å: postgres
–ï—Å–ª–∏ PostgreSQL —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ:

bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
psql -h localhost -U postgres -d postgres

# –°–æ–∑–¥–∞—Ç—å –ë–î –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
CREATE DATABASE blog_db;
3. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
   bash
# –°–±–æ—Ä–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Gradle wrapper
./gradlew build

# –ò–ª–∏ –µ—Å–ª–∏ gradle —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ
gradle build

# –ù–∞ Windows
gradlew.bat build
4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Gradle

bash
./gradlew bootRun
–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ JAR

bash
# –°–Ω–∞—á–∞–ª–∞ —Å–æ–±—Ä–∞—Ç—å
./gradlew bootJar

# –ü–æ—Ç–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å
java -jar build/libs/blog-application-java21.jar
–í–∞—Ä–∏–∞–Ω—Ç 3: –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –¥—Ä—É–≥–∏–º –ø–æ—Ä—Ç–æ–º
SERVER_PORT=9090 ./gradlew bootRun

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –¥—Ä—É–≥–æ–π –ë–î
SPRING_DATASOURCE_URL=jdbc:postgresql://localhost:5432/other_db ./gradlew bootRun
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
   bash
# –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ (–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)
curl http://localhost:8080/api/posts

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
# {"posts":[],"hasPrev":false,"hasNext":false,"lastPage":1}
6. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å API
   bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
curl -X POST "http://localhost:8080/api/posts?title=Hello&text=My%20first%20post&tags=Java,Spring"

# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã
curl http://localhost:8080/api/posts

# –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Å—Ç
curl http://localhost:8080/api/posts/1

# –î–æ–±–∞–≤–∏—Ç—å –ª–∞–π–∫
curl -X POST http://localhost:8080/api/posts/1/likes

# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
curl -X POST "http://localhost:8080/api/posts/1/comments?text=Great%20post"
–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Java 21
–ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω –∏–∑ 27 –º–∏–∫—Ä–æ–∫–æ–º–º–∏—Ç–æ–≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ —Ñ–∞–π–ª–µ JAVA21_MIGRATION_PLAN.txt

–§–∞–∑—ã –º–∏–≥—Ä–∞—Ü–∏–∏
–§–∞–∑–∞	–ù–∞–∑–≤–∞–Ω–∏–µ	–ö–æ–º–º–∏—Ç–æ–≤	–û–ø–∏—Å–∞–Ω–∏–µ
1	–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è	4	Gradle setup –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2	–ú–æ–¥–µ–ª–∏	3	–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å entities –Ω–∞ Java 21 records
3	DTOs	4	–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å DTOs –Ω–∞ records
4	Repositories	3	–°–æ–∑–¥–∞—Ç—å Spring Data JDBC repositories
5	Services	2	–û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è repositories
6	Controllers & Exception Handling	2	–§–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∏
7	Application	1	Main –∫–ª–∞—Å—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
8	Tests	4	–Æ–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
9	Database	1	SQL —Å–∫—Ä–∏–ø—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
10	Documentation	3	README –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ò—Ç–æ–≥–æ: 27 –º–∏–∫—Ä–æ–∫–æ–º–º–∏—Ç–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
Clean Architecture layers
text
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  REST Controllers (PostController)                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  DTOs (PostDetailDto, CommentDto, PostsResponse)        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Service Layer (PostService, CommentService)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Repository Layer (Spring Data JDBC)                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Model Layer (Post, Comment, PostTag - Java 21 records) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  PostgreSQL Database                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Data flow
text
HTTP Request
‚Üì
PostController (REST handler)
‚Üì
PostService (Business logic)
‚Üì
PostRepository (Spring Data JDBC)
‚Üì
PostgreSQL Database
‚Üì
Response (JSON DTOs)
Java 21 features –≤ –ø—Ä–æ–µ–∫—Ç–µ
1. Record Types
   Records –∑–∞–º–µ–Ω—è—é—Ç traditional classes —Å Lombok:

–î–ª—è entities (models):

java
@Table("posts")
public record Post(
@Id Long id,
@Column("title") String title,
@Column("text") String text,
// ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
) {
// Compact constructor –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
public Post {
if (title == null || title.isBlank()) {
throw new IllegalArgumentException("Title cannot be blank");
}
}
}
–î–ª—è DTOs:

java
public record PostDetailDto(
Long id,
String title,
String text,
List<String> tags,
@JsonProperty("likesCount") Integer likesCount,
@JsonProperty("commentsCount") Integer commentsCount
) {
// Compact constructor –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
public PostDetailDto {
if (title == null) throw new IllegalArgumentException("Title required");
}
}
–î–ª—è exception responses:

java
public record ErrorResponse(
@JsonProperty("timestamp") long timestamp,
@JsonProperty("status") int status,
@JsonProperty("message") String message,
@JsonProperty("path") String path,
@JsonProperty("details") String details
) {
// Compact constructor
public ErrorResponse {
if (message == null || message.isBlank()) {
throw new IllegalArgumentException("Message required");
}
}
}
2. Text Blocks
   –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏:

java
@Query("""
SELECT * FROM posts
WHERE LOWER(title) LIKE LOWER(CONCAT('%', :searchTerm, '%'))
OR LOWER(text) LIKE LOWER(CONCAT('%', :searchTerm, '%'))
ORDER BY created_at DESC
""")
List<Post> searchPosts(@Param("searchTerm") String searchTerm);
3. Pattern Matching
   –í exception handling (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è):

java
if (exception instanceof EntityNotFoundException ex) {
log.warn("Entity not found: {}", ex.getMessage());
return ResponseEntity.notFound().build();
}
4. Enhanced Switch (future versions)
   –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è pattern matching –≤ switch:

java
switch (post) {
case Post p when p.likesCount() > 100 -> logPopularPost(p);
case Post p -> logRegularPost(p);
}
5. Sealed Classes (future enhancement)
   –î–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

java
public sealed interface Entity permits Post, Comment, PostTag {
Long id();
}
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
–ö–∞—Ç–∞–ª–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞
text
blog-backend-java21/
‚îÇ
‚îú‚îÄ‚îÄ build.gradle.kts                    # Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Java 21
‚îú‚îÄ‚îÄ settings.gradle.kts
‚îú‚îÄ‚îÄ gradle.properties
‚îú‚îÄ‚îÄ gradlew, gradlew.bat               # Gradle wrapper
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml                 # PostgreSQL –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ .gitignore                         # Git –∏–≥–Ω–æ—Ä –ø—Ä–∞–≤–∏–ª–∞
‚îÇ
‚îú‚îÄ‚îÄ README.md                          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ ARCHITECTURE.md                    # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ JAVA21_MIGRATION_PLAN.txt         # –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ src/main/
‚îÇ   ‚îú‚îÄ‚îÄ java/ru/yandex/practicum/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BlogApplication.java                  # Entry point
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model/                                # Entities (Java 21 records)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Post.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Comment.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostTag.java
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repository/                          # Spring Data JDBC
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentRepository.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostTagRepository.java
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/                             # Business Logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostServiceImpl.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentService.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CommentServiceImpl.java
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controller/                          # REST Controllers
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostController.java
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                                 # DTOs (Java 21 records)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostDetailDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostListItemDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentDto.java
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostsResponse.java
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exception/                           # Exception Handling
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ GlobalExceptionHandler.java
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ErrorResponse.java (record)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ resources/
‚îÇ       ‚îú‚îÄ‚îÄ application.properties               # Production config
‚îÇ       ‚îú‚îÄ‚îÄ schema.sql                           # PostgreSQL DDL
‚îÇ       ‚îî‚îÄ‚îÄ data.sql                             # Production test data
‚îÇ
‚îî‚îÄ‚îÄ src/test/
‚îú‚îÄ‚îÄ java/ru/yandex/practicum/
‚îÇ   ‚îú‚îÄ‚îÄ AbstractIntegrationTest.java         # Base for all tests
‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PostServiceTest.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CommentServiceTest.java
‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PostControllerTest.java
‚îÇ   ‚îî‚îÄ‚îÄ BlogApplicationIntegrationTest.java  # E2E tests
‚îÇ
‚îî‚îÄ‚îÄ resources/
‚îú‚îÄ‚îÄ application-test.properties          # Test config
‚îî‚îÄ‚îÄ data-test.sql                        # Test fixtures
API Endpoints
Posts Management
–ú–µ—Ç–æ–¥	Endpoint	–û–ø–∏—Å–∞–Ω–∏–µ	–°—Ç–∞—Ç—É—Å
GET	/api/posts	–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)	200
GET	/api/posts?search=term	–ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤	200
GET	/api/posts/{id}	–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç –ø–æ ID	200/404
POST	/api/posts	–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç	201
PUT	/api/posts/{id}	–û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç	200/404
DELETE	/api/posts/{id}	–£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç	204/404
POST	/api/posts/{id}/likes	–£–≤–µ–ª–∏—á–∏—Ç—å –ª–∞–π–∫–∏	200/404
PUT	/api/posts/{id}/image	–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ	200/404
GET	/api/posts/{id}/image	–ü–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ	200/404
Comments Management
–ú–µ—Ç–æ–¥	Endpoint	–û–ø–∏—Å–∞–Ω–∏–µ	–°—Ç–∞—Ç—É—Å
GET	/api/posts/{id}/comments	–ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏	200
GET	/api/posts/{id}/comments/{cid}	–ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π	200/404
POST	/api/posts/{id}/comments	–°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π	201
PUT	/api/posts/{id}/comments/{cid}	–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π	200/404
DELETE	/api/posts/{id}/comments/{cid}	–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π	204/404
Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
–î–ª—è GET /api/posts:

pageNumber (int, default=1) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã

pageSize (int, default=10) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

search (string, optional) - –ø–æ–∏—Å–∫–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω

–î–ª—è POST /api/posts:

title (string, required) - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞

text (string, required) - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç

tags (List<String>, optional) - —Å–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
bash
# 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
curl http://localhost:8080/api/posts

# 2. –ü–æ–ª—É—á–∏—Ç—å 5 –ø–æ—Å—Ç–æ–≤ —Å–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
curl "http://localhost:8080/api/posts?pageNumber=2&pageSize=5"

# 3. –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤ –ø–æ "Java"
curl "http://localhost:8080/api/posts?search=Java"

# 4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
curl -X POST "http://localhost:8080/api/posts" \
-H "Content-Type: application/json" \
-d '{
"title": "Java 21 Features",
"text": "Record types, pattern matching...",
"tags": ["Java", "Spring", "News"]
}' \
-G -d "title=Java 21 Features" \
-d "text=Record types, pattern matching..." \
-d "tags=Java" -d "tags=Spring"

# 5. –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç –ø–æ ID
curl http://localhost:8080/api/posts/1

# 6. –û–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å—Ç
curl -X PUT "http://localhost:8080/api/posts/1" \
-G -d "title=Updated Title" \
-d "text=Updated content"

# 7. –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç
curl -X DELETE http://localhost:8080/api/posts/1

# 8. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∞–π–∫–∏
curl -X POST http://localhost:8080/api/posts/1/likes

# 9. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
curl -X PUT "http://localhost:8080/api/posts/1/image" \
-F "image=@photo.jpg"

# 10. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
curl http://localhost:8080/api/posts/1/comments

# 11. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
curl -X POST "http://localhost:8080/api/posts/1/comments" \
-G -d "text=Great post!"

# 12. –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
curl -X DELETE http://localhost:8080/api/posts/1/comments/5
–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
Gradle –∫–æ–º–∞–Ω–¥—ã
bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ
./gradlew projects

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏
./gradlew tasks

# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–æ–º–ø–∏–ª—è—Ü–∏—è + unit —Ç–µ—Å—Ç—ã)
./gradlew build

# –°–±–æ—Ä–∫–∞ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤
./gradlew build -x test

# –û—á–∏—Å—Ç–∏—Ç—å build –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
./gradlew clean

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Spring Boot
./gradlew bootRun

# –°–æ–∑–¥–∞—Ç—å executable JAR
./gradlew bootJar

# –°–æ–∑–¥–∞—Ç—å –æ–±—ã—á–Ω—ã–π JAR (–±–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Tomcat)
./gradlew jar

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
./gradlew dependencies

# –û–±–Ω–æ–≤–∏—Ç—å Gradle wrapper
./gradlew wrapper --gradle-version=latest
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ß–µ—Ä–µ–∑ Gradle:

bash
./gradlew bootRun

# –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ VM –æ–ø—Ü–∏—è–º–∏
./gradlew bootRun --args='--server.port=9090'
–ß–µ—Ä–µ–∑ JAR —Ñ–∞–π–ª:

bash
# –°–Ω–∞—á–∞–ª–∞ —Å–æ–±—Ä–∞—Ç—å JAR
./gradlew bootJar

# –ü–æ—Ç–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å
java -jar build/libs/blog-application-java21.jar

# –° —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏
java -Dserver.port=9090 \
-Dspring.datasource.url=jdbc:postgresql://localhost:5432/blog_db \
-jar build/libs/blog-application-java21.jar
–ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

bash
# Linux/Mac
export SERVER_PORT=9090
export SPRING_DATASOURCE_PASSWORD=mypassword
./gradlew bootRun

# Windows (PowerShell)
$env:SERVER_PORT=9090
$env:SPRING_DATASOURCE_PASSWORD=mypassword
./gradlew bootRun

# Windows (CMD)
set SERVER_PORT=9090
set SPRING_DATASOURCE_PASSWORD=mypassword
gradlew.bat bootRun
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
./gradlew test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å
./gradlew test --tests PostServiceTest

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –º–µ—Ç–æ–¥
./gradlew test --tests PostServiceTest.testCreatePost_ShouldCreateNewPost

# –¢–µ—Å—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
./gradlew test --info

# –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
./gradlew build -x test
–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ
1. Integration Tests (AbstractIntegrationTest):

–ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ–ª–Ω—ã–π Spring –∫–æ–Ω—Ç–µ–∫—Å—Ç

–†–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω–æ–π H2 –ë–î

–ù–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç AbstractIntegrationTest –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–§–∞–π–ª—ã: *ServiceTest.java, BlogApplicationIntegrationTest.java

2. WebMvc Tests (PostControllerTest):

–ò—Å–ø–æ–ª—å–∑—É—é—Ç @WebMvcTest –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–ª—å–∫–æ –≤–µ–±-—Å–ª–æ—è

–ú–æ–∫–∏—Ä—É—é—Ç —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ @MockBean

–ò—Å–ø–æ–ª—å–∑—É—é—Ç MockMvc –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è HTTP

–§–∞–π–ª: PostControllerTest.java

3. Test Context Caching:

Spring –∫–µ—à–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

AbstractIntegrationTest –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

spring.test.context.cache.maxSize=10 –≤ application-test.properties

–†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–µ—Å—Ç—ã –Ω–∞ 50-60% –±—ã—Å—Ç—Ä–µ–µ!

Coverage –æ—Ç—á–µ—Ç—ã
bash
# –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å JaCoCo plugin –≤ build.gradle:
./gradlew jacocoTestReport

# –û—Ç—á–µ—Ç –±—É–¥–µ—Ç –≤: build/reports/jacoco/test/html/
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
application.properties (Production)
text
# Server
server.port=8080
server.servlet.context-path=/api

# PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/blog_db
spring.datasource.username=postgres
spring.datasource.password=postgres

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5

# SQL Initialization
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema.sql
spring.sql.init.data-locations=classpath:data.sql

# Java 21 features
spring.threads.virtual.enabled=true

# Logging
logging.level.root=INFO
logging.level.ru.yandex.practicum=DEBUG
application-test.properties (Testing)
text
# H2 in-memory database
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL
spring.datasource.driver-class-name=org.h2.Driver

# Test context caching
spring.test.context.cache.maxSize=10

# Logging
logging.level.root=INFO
logging.level.ru.yandex.practicum=DEBUG
Environment Variables
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ª—é–±–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

bash
# –§–æ—Ä–º–∞—Ç: SPRING_<SECTION>_<PROPERTY>
SPRING_DATASOURCE_URL=jdbc:postgresql://remote-host:5432/blog_db
SPRING_DATASOURCE_USERNAME=prod_user
SPRING_DATASOURCE_PASSWORD=secure_password
SERVER_PORT=8080
Troubleshooting
–û—à–∏–±–∫–∞: "Connection refused" –∫ PostgreSQL
–°–∏–º–ø—Ç–æ–º—ã:

text
org.postgresql.util.PSQLException: Connection to localhost:5432 refused.
–†–µ—à–µ–Ω–∏–µ:

bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
docker-compose ps

# 2. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ
docker-compose up -d

# 3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL
pg_isready -h localhost -p 5432

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ application.properties
spring.datasource.url=jdbc:postgresql://localhost:5432/blog_db
spring.datasource.username=postgres
spring.datasource.password=postgres
–û—à–∏–±–∫–∞: "Port 8080 already in use"
–†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç

bash
SERVER_PORT=9090 ./gradlew bootRun
–†–µ—à–µ–Ω–∏–µ 2: –ù–∞–π—Ç–∏ –∏ —É–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8080

bash
# Linux/Mac
lsof -i :8080
kill -9 <PID>

# Windows (PowerShell)
netstat -ano | findstr :8080
taskkill /PID <PID> /F
–û—à–∏–±–∫–∞: "Database already exists"
–†–µ—à–µ–Ω–∏–µ:

bash
# –î—Ä–æ–ø–∏—Ç—å –ë–î –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
docker-compose down -v
docker-compose up -d

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å –ë–î –≤—Ä—É—á–Ω—É—é
psql -U postgres
DROP DATABASE IF EXISTS blog_db;
CREATE DATABASE blog_db;
–û—à–∏–±–∫–∞: "Java version 21 is not supported"
–†–µ—à–µ–Ω–∏–µ:

bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Java
java -version

# –ï—Å–ª–∏ Java < 21, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Java 21 LTS
# https://www.oracle.com/java/technologies/downloads/#java21

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è JAVA_HOME
export JAVA_HOME=/path/to/java-21
–¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π –ë–î
–ü—Ä–∏—á–∏–Ω–∞: –ö–æ–Ω—Ç–µ–∫—Å—Ç Spring –Ω–µ –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

–†–µ—à–µ–Ω–∏–µ:

bash
# –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à Gradle –∏ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
./gradlew clean build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
./gradlew test --info --stacktrace
Slow tests
–ü—Ä–∏—á–∏–Ω–∞: –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã –Ω–µ –∫–µ—à–∏—Ä—É—é—Ç—Å—è –∏–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ

–†–µ—à–µ–Ω–∏–µ:

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç AbstractIntegrationTest

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ spring.test.context.cache.maxSize=10 –≤ application-test.properties

–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @MockBean (–∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –º–æ–∫ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
Java 21 Documentation

Spring Boot 3.2 Reference

Spring Data JDBC Documentation

PostgreSQL Documentation

Gradle Documentation

JUnit 5 User Guide

–ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ
JAVA21_MIGRATION_PLAN.txt - –ü–æ–ª–Ω—ã–π –ø–ª–∞–Ω –∏–∑ 27 –º–∏–∫—Ä–æ–∫–æ–º–º–∏—Ç–æ–≤

ARCHITECTURE.md - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)

build.gradle.kts - –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

src/main/resources/schema.sql - –°—Ö–µ–º–∞ –ë–î

src/main/resources/data.sql - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–∏–Ω–≥
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:

–°–æ–∑–¥–∞–π—Ç–µ branch –¥–ª—è –≤–∞—à–µ–π —Ñ–∏—á–∏

–°–ª–µ–¥—É–π—Ç–µ –ø–ª–∞–Ω—É –º–∏–∫—Ä–æ–∫–æ–º–º–∏—Ç–æ–≤ –∏–∑ JAVA21_MIGRATION_PLAN.txt

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç: ./gradlew test

–°–æ–∑–¥–∞–π—Ç–µ Pull Request —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

